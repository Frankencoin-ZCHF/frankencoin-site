---
import { getLanguageFromURL, loadContent, getLocalizedPath } from "../../utils/i18n";

const currentLang = getLanguageFromURL(Astro.url.pathname);
const index = await loadContent("index", currentLang);
const compliancePath = getLocalizedPath('/compliance', currentLang);
---

<div class="space-y-16 max-w-5xl mx-auto">
  <!-- Regulatory Section -->
  <div class="space-y-6">
    <h3 class="ty-big-2">{index.trust_security.regulatory.title}</h3>
    <p class="ty-body-1">{index.trust_security.regulatory.description}</p>

    <!-- Learn More Link -->
    <div class="mt-6">
      <a
        href={compliancePath}
        class="inline-flex items-center gap-2 bg-[var(--color-brand-deep-blue)] text-white px-6 py-3 rounded-lg ty-regular font-bold hover:bg-[var(--color-brand-swiss)] transition-colors"
      >
        <span>{index.trust_security.regulatory.learnMoreLabel}</span>
        <img src="/images/Arrow.svg" loading="lazy" alt="" class="w-3 h-3 invert" />
      </a>
    </div>

    <!-- Direct PDF Links -->
    <div class="flex flex-col md:flex-row gap-6 mt-6">
      {index.trust_security.regulatory.documents.map((doc) => (
        <a
          href={doc.href}
          target="_blank"
          rel="noopener noreferrer"
          class="ty-regular text-[var(--color-brand-deep-blue)] hover:underline inline-flex items-center gap-2"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          <span>{doc.label}</span>
        </a>
      ))}
    </div>
  </div>

  <!-- Audits Section -->
  <div class="space-y-6">
    <h3 class="ty-big-2">{index.trust_security.audits.title}</h3>
    <p class="ty-body-1">{index.trust_security.audits.description}</p>
    <div class="flex flex-wrap justify-center md:justify-start gap-8 mt-8">
      {index.trust_security.audits.partners.map((partner) => (
        <a href={partner.href} target="_blank" rel="noopener noreferrer" class="block">
          <div class="flex flex-col items-center">
            <img
              class="w-[150px] md:w-[180px] hover:scale-110 transition"
              src={partner.image}
              alt={partner.altText}
              height="40"
              loading="lazy"
            />
            {partner?.sublinks && (
              <div class="flex gap-4 mt-3">
                {partner.sublinks.map((sublink) => (
                  <a
                    href={sublink.href}
                    class="ty-small text-[var(--color-brand-titan-gray)] hover:text-[var(--color-brand-swiss)] hover:underline font-bold"
                    target="_blank"
                  >
                    {sublink.label}
                  </a>
                ))}
              </div>
            )}
          </div>
        </a>
      ))}
    </div>
  </div>
</div>
