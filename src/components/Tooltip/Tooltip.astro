---
import token from "../../content/token.json";

interface Props {
  text: string;
  toCopy: string;
}

const { text = token.tokens.actions.copyTextTooltip, toCopy } = Astro.props;
---

<div
  class="relative inline-flex items-center group"
  x-data="{ 
    copied: false,
    copyText() {
      navigator.clipboard.writeText(this.toCopy);
      this.copied = true;
      setTimeout(() => this.copied = false, 2000);
    },
    toCopy: $el.dataset.toCopy
  }"
  data-to-copy={toCopy}
>
  <button class="p-1 rounded" @click="copyText()" aria-label="Copy address">
    <img
      :src="copied ? '/images/copy-icon-Compressify.io.webp' : '/images/copy-icon-1.svg'"
      alt="Copy"
      class="w-4 h-4 transition-all duration-200"
    />
  </button>

  <!-- Tooltip -->
  <div
    class="absolute -top-7 left-1/2 -translate-x-1/2 whitespace-nowrap
           bg-gray-800 text-white text-xs rounded-md px-2 py-1
           opacity-0 group-hover:opacity-100 cursor-pointer
           pointer-events-none transition-opacity"
    x-show="!copied"
  >
    {text}
    <div
      class="absolute left-1/2 -bottom-0.5 -translate-x-1/2 w-2 h-2 rotate-45 bg-gray-800"
    >
    </div>
  </div>

  <div
    class="absolute -top-7 left-1/2 -translate-x-1/2 whitespace-nowrap
           bg-gray-800 text-white text-xs rounded-md px-2 py-1
           pointer-events-none transition-opacity"
    x-show="copied"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 transform scale-95"
    x-transition:enter-end="opacity-100 transform scale-100"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 transform scale-100"
    x-transition:leave-end="opacity-0 transform scale-95"
  >
    {token.tokens.actions.copiedLabel}
    <div
      class="absolute left-1/2 -bottom-0.5 -translate-x-1/2 w-2 h-2 rotate-45 bg-gray-800"
    >
    </div>
  </div>
</div>
