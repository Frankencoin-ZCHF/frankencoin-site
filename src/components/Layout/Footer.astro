---
import SocialLinksBar from "../SocialLinksBar.astro";
import footerData from "../../content/shared/footer.json";

const year = new Date().getFullYear();
const { footer } = footerData;
const copyrightText = footer.copyright.replace("{year}", year.toString());

interface Link {
  label: string;
  href: string;
  external?: boolean;
}

interface Section {
  title: string;
  links: Link[];
}

interface Column {
  title: string;
  links: Link[];
  sections?: Section[];
}
---

<footer
  class="w-full bottom-0 bg-[var(--color-brand-anthracite)] border-t border-[var(--color-neutral-700)]"
>
  <div class="mx-auto max-w-6xl px-[var(--spacing-l)] py-12">
    <!-- 4 Column Layout -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
      {
        footer.columns.map((column: Column) => (
          <div class="flex flex-col gap-4">
            <h3
              style="color: var(--color-white);"
              class="text-[var(--font-size-base)] font-semibold"
            >
              {column.title}
            </h3>
            <nav class="flex flex-col gap-3">
              {column.links.map((link: Link) => (
                <a
                  href={link.href}
                  {...(link.external
                    ? { target: "_blank", rel: "noopener noreferrer" }
                    : {})}
                  style="color: var(--color-white);"
                  class="text-[var(--font-size-sm)] transition-opacity hover:opacity-70"
                >
                  {link.label}
                </a>
              ))}
            </nav>

            {column.sections?.map((section: Section) => (
              <>
                <h3
                  style="color: var(--color-white);"
                  class="text-[var(--font-size-base)] font-semibold mt-4"
                >
                  {section.title}
                </h3>
                <nav class="flex flex-col gap-3">
                  {section.links.map((link: Link) => (
                    <a
                      href={link.href}
                      {...(link.external
                        ? { target: "_blank", rel: "noopener noreferrer" }
                        : {})}
                      style="color: var(--color-white);"
                      class="text-[var(--font-size-sm)] transition-opacity hover:opacity-70"
                    >
                      {link.label}
                    </a>
                  ))}
                </nav>
              </>
            ))}
          </div>
        ))
      }
    </div>

    <!-- Social icons bar and copyright -->
    <div
      class="flex flex-col items-center gap-6 pt-8 border-t border-[var(--color-neutral-700)]"
    >
      <SocialLinksBar theme={"light"} />
      <p
        style="color: var(--color-neutral-400);"
        class="text-[var(--font-size-xs)]"
      >
        {copyrightText}
      </p>
    </div>
  </div>
</footer>
